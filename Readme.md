# Store Telebot

**Store Telebot** — это Telegram-бот для онлайн-магазина, реализованный на Python с использованием фреймворка [aiogram 3.x](https://docs.aiogram.dev/en/latest/). Бот позволяет пользователям просматривать каталог товаров, регистрироваться, оформлять заказы и связываться с администрацией магазина.

## Возможности

- Регистрация пользователей с валидацией имени и телефона
- Просмотр каталога товаров по категориям
- Просмотр подробной информации о товаре (описание, фото, цена)
- Оформление заказа с указанием адреса
- Отправка информации о заказе в Telegram-группу администраторов
- Контактная информация для связи с магазином
- Удобные клавиатуры и инлайн-кнопки для взаимодействия

## Структура проекта

```
app/
  ├── admin.py           # (пустой, зарезервирован под админ-функции)
  ├── client.py          # Основная логика взаимодействия с пользователем
  ├── database/
  │     ├── models.py    # Описание моделей БД и инициализация
  │     └── requests.py  # Асинхронные запросы к БД
  └── keyboards.py       # Генерация клавиатур и инлайн-кнопок
run.py                   # Точка входа, запуск бота
requirements.txt         # Зависимости проекта
pyproject.toml           # Метаинформация о проекте
Readme.md                # Описание проекта (этот файл)
```

## Быстрый старт

1. **Клонируйте репозиторий и установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Создайте файл `settings.ini` в корне проекта:**
   ```ini
   [Tokens]
   telebot_token = <ВАШ_ТОКЕН_БОТА>

   [Group]
   group_id = <ID_ГРУППЫ_ДЛЯ_ЗАКАЗОВ>

   [Database]
   user = <DB_USER>
   password = <DB_PASSWORD>
   host = <DB_HOST>
   port = <DB_PORT>
   database = <DB_NAME>

   [Other]
   name = <Имя_контактного_лица>
   phone_number = <Телефон_контактного_лица>
   user = <Telegram_ник_контактного_лица>
   ```

3. **Запустите бота:**
   ```bash
   python run.py
   ```

## Описание основных компонентов

### 1. Пользовательский сценарий

- При первом запуске бот регистрирует пользователя, запрашивая имя и телефон (с валидацией).
- После регистрации доступно главное меню: просмотр каталога, контакты.
- Каталог строится по категориям, товары выводятся с фото, описанием и ценой.
- Для заказа товара пользователь указывает адрес, после чего заказ отправляется в Telegram-группу администраторов.

### 2. Модели базы данных (`app/database/models.py`)

- **User**: id, tg_id, name, phone_number
- **Category**: id, name
- **Product**: id, name, description, price, image, category_id

Используется асинхронный SQLAlchemy и PostgreSQL.

### 3. Работа с БД (`app/database/requests.py`)

- Регистрация и обновление пользователя
- Получение пользователя по tg_id
- Получение категорий и товаров по категориям
- Получение информации о товаре по id

### 4. Клавиатуры (`app/keyboards.py`)

- Главное меню (каталог, контакты)
- Динамические инлайн-клавиатуры для категорий и товаров
- Кнопки для регистрации (имя, телефон)

## Зависимости

- aiogram==3.20.0.post0
- SQLAlchemy==2.0.41
- asyncpg==0.30.0
- redis==6.1.0
- pydantic, aiohttp и др. (см. requirements.txt)

## Примечания

- Для работы требуется PostgreSQL.
- Все настройки (токен, БД, id группы) задаются в `settings.ini`.
- Файл `app/admin.py` зарезервирован для будущих админ-функций. 
